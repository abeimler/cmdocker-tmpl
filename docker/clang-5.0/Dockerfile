FROM purplekarrot/clang-5.0



ENV BUILD_NAME 'gcc-5'
ENV BUILD_MODEL 'Experimental'
ENV CHANGE_ID "$(git rev-parse --verify HEAD)"
ENV CTEST_COVERAGE_COMMAND ''
ENV CTEST_MEMORYCHECK_COMMAND ''
ENV CTEST_MEMORYCHECK_TYPE ''
ENV SUBMIT_RESULTS 0
ENV BUILD_PACKAGES 0

ENV BUILD_CONFIG Release
ENV BUILD_PATH /binary/$BUILD_NAME
ENV SOURCE_PATH /source
ENV PREFIX_PATH /prefix
ENV RUN_TESTS 1
ENV CLEAN_BUILD 0
ENV CMAKE_OPTIONS ''

VOLUME $BUILD_PATH
VOLUME $SOURCE_PATH
VOLUME $PREFIX_PATH

RUN mkdir -p $BUILD_PATH
RUN mkdir -p $SOURCE_PATH
RUN mkdir -p $PREFIX_PATH

COPY ./scripts $SOURCE_PATH/scripts

RUN $SOURCE_PATH/scripts/install-deps.sh

ENTRYPOINT $SOURCE_PATH/scripts/entrypoint.sh